<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Podman on Underkube</title><link>https://e-minguez.github.io/underkube/pr-preview/pr-43/tags/podman/</link><description>Recent content in Podman on Underkube</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Wed, 26 Jan 2022 08:30:00 +0000</lastBuildDate><atom:link href="https://e-minguez.github.io/underkube/pr-preview/pr-43/tags/podman/index.xml" rel="self" type="application/rss+xml"/><item><title>Quick and dirty way to compile a golang binary using a container</title><link>https://e-minguez.github.io/underkube/pr-preview/pr-43/golang-container-build/</link><pubDate>Wed, 26 Jan 2022 08:30:00 +0000</pubDate><guid>https://e-minguez.github.io/underkube/pr-preview/pr-43/golang-container-build/</guid><description>I wanted to compile the hypershift binary but it requires golang 1.17 which is not included in Fedora 35, so I ended up doing this:
mkdir ./tmp/ &amp;amp;&amp;amp; \ podman run -it -v ${PWD}/tmp:/var/tmp/hypershift-bin/:Z --rm docker.io/golang:1.17 sh -c \ &amp;#39;git clone --depth 1 https://github.com/openshift/hypershift.git /var/tmp/hypershift/ &amp;amp;&amp;amp; \ cd /var/tmp/hypershift &amp;amp;&amp;amp; \ make hypershift &amp;amp;&amp;amp; \ cp bin/hypershift /var/tmp/hypershift-bin/&amp;#39; &amp;amp;&amp;amp; \ cp ${PWD}/tmp/hypershift ~/bin/ HTH</description></item><item><title>Running hpasmcli commands on a container using podman</title><link>https://e-minguez.github.io/underkube/pr-preview/pr-43/hpasmcli-podman/</link><pubDate>Thu, 10 Jun 2021 08:30:00 +0000</pubDate><guid>https://e-minguez.github.io/underkube/pr-preview/pr-43/hpasmcli-podman/</guid><description>To be able to monitor hardware health, status and information on HP servers running RHEL, it is required to install the HP&amp;rsquo;s Service Pack for Proliant packages.
It seems the Management Component Pack is the same(agent software but for community distros, for enterprise, use SPP.
There is more info about those HP tools on the HP site
Basically you just need to add a yum/dnf repository, install the packages and start a service (actually the service is started as part of the RPM post-install, which is not a good practice&amp;hellip;)</description></item><item><title>Using an external registry with OpenShift 4</title><link>https://e-minguez.github.io/underkube/pr-preview/pr-43/external-registry-ocp/</link><pubDate>Thu, 11 Feb 2021 08:30:00 +0000</pubDate><guid>https://e-minguez.github.io/underkube/pr-preview/pr-43/external-registry-ocp/</guid><description>In this blog post I&amp;rsquo;m trying to perform the integration of an external registry with an OpenShift environment.
The external registry can be any container registry, but in this case I&amp;rsquo;ve configured harbor to use certificates (self generated), the &amp;rsquo;library&amp;rsquo; repository in the harbor registry to be private (aka. require user/pass) and created an &amp;rsquo;edu&amp;rsquo; user account with permissions on that &amp;rsquo;library&amp;rsquo; repository.
Harbor installation ðŸ”—Pretty straightforward if following the docs, but for RHEL7:</description></item><item><title>Nextcloud with podman rootless containers and user systemd services. Part I - Introduction</title><link>https://e-minguez.github.io/underkube/pr-preview/pr-43/nextcloud-podman-rootless-systemd-part-i-introduction/</link><pubDate>Thu, 28 Jan 2021 08:30:00 +0000</pubDate><guid>https://e-minguez.github.io/underkube/pr-preview/pr-43/nextcloud-podman-rootless-systemd-part-i-introduction/</guid><description>Introduction ðŸ”—I&amp;rsquo;ve been using Nextcloud for a few years as my personal &amp;lsquo;file storage cloud&amp;rsquo;. There are official container images and docker-compose files to be able to run it easily.
For quite a while, I&amp;rsquo;ve been using the nginx+redis+mariadb+cron docker-compose file as it has all the components to be able to run an &amp;rsquo;enterprise ready&amp;rsquo; Nextcloud, even if I&amp;rsquo;m only using it for personal use :)
In this blog post I&amp;rsquo;m going to try to explain how do I moved from that docker-compose setup to a podman rootless and systemd one.</description></item><item><title>Nextcloud with podman rootless containers and user systemd services. Part II - Nextcloud pod</title><link>https://e-minguez.github.io/underkube/pr-preview/pr-43/nextcloud-podman-rootless-systemd-part-ii-nextcloud-pod/</link><pubDate>Thu, 28 Jan 2021 08:30:00 +0000</pubDate><guid>https://e-minguez.github.io/underkube/pr-preview/pr-43/nextcloud-podman-rootless-systemd-part-ii-nextcloud-pod/</guid><description>Running a rootless Nextcloud pod ðŸ”—Instead of running Nextcloud as independant containers, I&amp;rsquo;ve decided to leverage one of the multiple podman features which is being able to run multiple containers as a pod (like a kubernetes pod!)
The main benefit to me of doing so is they they use a single network namespace, meaning all the containers running in the same pod can reach each other using localhost and you only need to expose the web interface.</description></item><item><title>Nextcloud with podman rootless containers and user systemd services. Part III - NFS gotchas</title><link>https://e-minguez.github.io/underkube/pr-preview/pr-43/nextcloud-podman-rootless-systemd-part-iii-nfs-gotchas/</link><pubDate>Thu, 28 Jan 2021 08:30:00 +0000</pubDate><guid>https://e-minguez.github.io/underkube/pr-preview/pr-43/nextcloud-podman-rootless-systemd-part-iii-nfs-gotchas/</guid><description>Nextcloud in container user IDs ðŸ”—The nextcloud process running in the container runs as the www-data user which in fact is the user id 82:
$ podman exec -it nextcloud-app /bin/sh /var/www/html # ps auxww | grep php-fpm 1 root 0:10 php-fpm: master process (/usr/local/etc/php-fpm.conf) 74 www-data 0:16 php-fpm: pool www 75 www-data 0:15 php-fpm: pool www 76 www-data 0:07 php-fpm: pool www 84 root 0:00 grep php-fpm /var/www/html # grep www-data /etc/passwd www-data:x:82:82:Linux User,,,:/home/www-data:/sbin/nologin NFS and user IDs ðŸ”—NFS exports can be configured to have a forced uid/gid using the anonuid, anongid and all_squash parameters.</description></item><item><title>Nextcloud with podman rootless containers and user systemd services. Part IV - Exposing Nextcloud externally</title><link>https://e-minguez.github.io/underkube/pr-preview/pr-43/nextcloud-podman-rootless-systemd-part-iv-exposing/</link><pubDate>Thu, 28 Jan 2021 08:30:00 +0000</pubDate><guid>https://e-minguez.github.io/underkube/pr-preview/pr-43/nextcloud-podman-rootless-systemd-part-iv-exposing/</guid><description>Introducing bunkerized-nginx ðŸ”—I heard about bunkerized-nginx a while ago and I thought it would be nice to use it as a reverse proxy so I can expose my internal services to the internet &amp;lsquo;safely&amp;rsquo;.
A non-exhaustive list of features (copy &amp;amp; paste from the README):
HTTPS support with transparent Let&amp;rsquo;s Encrypt automation State-of-the-art web security : HTTP security headers, prevent leaks, TLS hardening, &amp;hellip; Integrated ModSecurity WAF with the OWASP Core Rule Set Automatic ban of strange behaviors with fail2ban Antibot challenge through cookie, javascript, captcha or recaptcha v3 Block TOR, proxies, bad user-agents, countries, &amp;hellip; Block known bad IP with DNSBL and CrowdSec Prevent bruteforce attacks with rate limiting Detect bad files with ClamAV Easy to configure with environment variables or web UI Automatic configuration with container labels A must have for me was having support for Let&amp;rsquo;s Encrypt and having an easy way to configure it.</description></item><item><title>Nextcloud with podman rootless containers and user systemd services. Part V - Running Nextcloud as a pod with play kube</title><link>https://e-minguez.github.io/underkube/pr-preview/pr-43/nextcloud-podman-rootless-systemd-part-v-nextcloud-pod/</link><pubDate>Thu, 28 Jan 2021 08:30:00 +0000</pubDate><guid>https://e-minguez.github.io/underkube/pr-preview/pr-43/nextcloud-podman-rootless-systemd-part-v-nextcloud-pod/</guid><description>podman play kube ðŸ”—One of the cool things about podman is that is not just a docker replacement, it can do so much more!
The feature I&amp;rsquo;m talking about is being able to run Kubernetes YAML pod definitions! How cool is that?
You can read more about this feature in the podman-play-kube man, but essentially, you just need a proper pod yaml definition and podman play kube /path/to/my/pod.yaml will run it for you.</description></item><item><title>Podman rootless containers in RHEL7</title><link>https://e-minguez.github.io/underkube/pr-preview/pr-43/podman-rootless-rhel7/</link><pubDate>Fri, 24 Jul 2020 12:26:20 +0100</pubDate><guid>https://e-minguez.github.io/underkube/pr-preview/pr-43/podman-rootless-rhel7/</guid><description>Quick howto to make podman rootless containers work in RHEL7:
sudo yum clean all sudo yum update -y sudo yum install slirp4netns podman -y echo &amp;#34;user.max_user_namespaces=28633&amp;#34; | sudo tee -a /etc/sysctl.d/userns.conf sudo sysctl -p /etc/sysctl.d/userns.conf sudo usermod --add-subuids 200000-300000 --add-subgids 200000-300000 $(whoami) podman system migrate Then, logout and log-in again. Easy peasy!</description></item></channel></rss>