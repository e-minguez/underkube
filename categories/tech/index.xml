<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Tech on Underkube</title><link>https://www.underkube.com/categories/tech/</link><description>Recent content in Tech on Underkube</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Mon, 21 Feb 2022 08:30:00 +0000</lastBuildDate><atom:link href="https://www.underkube.com/categories/tech/index.xml" rel="self" type="application/rss+xml"/><item><title>Using sushy-tools in a container to simulate RedFish BMC</title><link>https://www.underkube.com/sushy-tools-as-container/</link><pubDate>Mon, 21 Feb 2022 08:30:00 +0000</pubDate><guid>https://www.underkube.com/sushy-tools-as-container/</guid><description>I wanted to simulate a RedFish BMC to be able to power on/off libvirt virtualmachines and attach ISOs as I do for baremetal hosts.
Entering sushy-tools üîósushy-tools include a RedFish BMC emulator as sushy-emulator (see the code in the official repo).
Basically it can connect to the libvirt socket to perform the required actions exposing a RedFish API.
metal3-io/sushy-tools container image üîóTo easily consume it, the metal3 folks already have a container image ready for consumption at quay.</description></item><item><title>Using systemd-path to keep specific folder permissions</title><link>https://www.underkube.com/using-systemd-path-to-keep-folder-permissions/</link><pubDate>Mon, 21 Feb 2022 08:30:00 +0000</pubDate><guid>https://www.underkube.com/using-systemd-path-to-keep-folder-permissions/</guid><description>I wanted to have specific permissions on the /var/lib/libvirt/images folder to be able to write as my user. To do it, you can just use setfacl as:
$ sudo setfacl -m u:edu:rwx /var/lib/libvirt/images The issue is sometimes those permissions were reset to the default ones&amp;hellip; but why? and most important&amp;hellip; who?
auditd üîóTo find the culprit I used auditd to monitor changes in that particular folder as:
$ sudo auditctl -w /var/lib/libvirt/images -p a -k libvirt-images Then, performed a system update just in case&amp;hellip; and after a while&amp;hellip;</description></item><item><title>Howto configure a CentOS 8 Stream host as a network router and provide dhcp and dns services</title><link>https://www.underkube.com/centos-as-router/</link><pubDate>Tue, 08 Feb 2022 08:30:00 +0000</pubDate><guid>https://www.underkube.com/centos-as-router/</guid><description>I wanted to configure a VM to act as a router between two networks, providing DHCP and DNS services as well.
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îú‚îÄ‚îÄ‚îÄ‚î§ vm01 ‚îÇ ‚îú‚îÄ‚î§ dhcprouter ‚îú‚îÄ‚îÄ‚î§ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚î§ vm02 ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ public network private network public network is the regular libvirt network created by default (192.</description></item><item><title>Quick and dirty way to compile a golang binary using a container</title><link>https://www.underkube.com/golang-container-build/</link><pubDate>Wed, 26 Jan 2022 08:30:00 +0000</pubDate><guid>https://www.underkube.com/golang-container-build/</guid><description>I wanted to compile the hypershift binary but it requires golang 1.17 which is not included in Fedora 35, so I ended up doing this:
mkdir ./tmp/ &amp;amp;&amp;amp; \ podman run -it -v ${PWD}/tmp:/var/tmp/hypershift-bin/:Z --rm docker.io/golang:1.17 sh -c \ &amp;#39;git clone --depth 1 https://github.com/openshift/hypershift.git /var/tmp/hypershift/ &amp;amp;&amp;amp; \ cd /var/tmp/hypershift &amp;amp;&amp;amp; \ make hypershift &amp;amp;&amp;amp; \ cp bin/hypershift /var/tmp/hypershift-bin/&amp;#39; &amp;amp;&amp;amp; \ cp ${PWD}/tmp/hypershift ~/bin/ HTH</description></item><item><title>Running hpasmcli commands on a container using podman</title><link>https://www.underkube.com/hpasmcli-podman/</link><pubDate>Thu, 10 Jun 2021 08:30:00 +0000</pubDate><guid>https://www.underkube.com/hpasmcli-podman/</guid><description>To be able to monitor hardware health, status and information on HP servers running RHEL, it is required to install the HP&amp;rsquo;s Service Pack for Proliant packages.
It seems the Management Component Pack is the same(agent software but for community distros, for enterprise, use SPP.
There is more info about those HP tools on the HP site
Basically you just need to add a yum/dnf repository, install the packages and start a service (actually the service is started as part of the RPM post-install, which is not a good practice&amp;hellip;)</description></item><item><title>Customizing OpenShift 4 baremetal IPI network at installation time</title><link>https://www.underkube.com/custom-network-openshift-ipi-install-time/</link><pubDate>Mon, 08 Mar 2021 08:30:00 +0000</pubDate><guid>https://www.underkube.com/custom-network-openshift-ipi-install-time/</guid><description>When deploying OpenShift IPI on baremetal, there is only so much you can tweak at installation time in terms of networking. Of course you can do changes after the installation, such as applying bonding configurations or vlan settings via machine configs&amp;hellip; but what if you need those changes at installation time?
In my case, I have an OpenShift environment composed by physical servers where each of them have 4 NICs. 1 unplugged NIC, 1 NIC connected to the provisioning network and 2 NICs connected to the same switch and to the same baremetal subnet.</description></item><item><title>Using an external registry with OpenShift 4</title><link>https://www.underkube.com/external-registry-ocp/</link><pubDate>Thu, 11 Feb 2021 08:30:00 +0000</pubDate><guid>https://www.underkube.com/external-registry-ocp/</guid><description>In this blog post I&amp;rsquo;m trying to perform the integration of an external registry with an OpenShift environment.
The external registry can be any container registry, but in this case I&amp;rsquo;ve configured harbor to use certificates (self generated), the &amp;rsquo;library&amp;rsquo; repository in the harbor registry to be private (aka. require user/pass) and created an &amp;rsquo;edu&amp;rsquo; user account with permissions on that &amp;rsquo;library&amp;rsquo; repository.
Harbor installation üîóPretty straightforward if following the docs, but for RHEL7:</description></item><item><title>Nextcloud with podman rootless containers and user systemd services. Part I - Introduction</title><link>https://www.underkube.com/nextcloud-podman-rootless-systemd-part-i-introduction/</link><pubDate>Thu, 28 Jan 2021 08:30:00 +0000</pubDate><guid>https://www.underkube.com/nextcloud-podman-rootless-systemd-part-i-introduction/</guid><description>Introduction üîóI&amp;rsquo;ve been using Nextcloud for a few years as my personal &amp;lsquo;file storage cloud&amp;rsquo;. There are official container images and docker-compose files to be able to run it easily.
For quite a while, I&amp;rsquo;ve been using the nginx+redis+mariadb+cron docker-compose file as it has all the components to be able to run an &amp;rsquo;enterprise ready&amp;rsquo; Nextcloud, even if I&amp;rsquo;m only using it for personal use :)
In this blog post I&amp;rsquo;m going to try to explain how do I moved from that docker-compose setup to a podman rootless and systemd one.</description></item><item><title>Nextcloud with podman rootless containers and user systemd services. Part II - Nextcloud pod</title><link>https://www.underkube.com/nextcloud-podman-rootless-systemd-part-ii-nextcloud-pod/</link><pubDate>Thu, 28 Jan 2021 08:30:00 +0000</pubDate><guid>https://www.underkube.com/nextcloud-podman-rootless-systemd-part-ii-nextcloud-pod/</guid><description>Running a rootless Nextcloud pod üîóInstead of running Nextcloud as independant containers, I&amp;rsquo;ve decided to leverage one of the multiple podman features which is being able to run multiple containers as a pod (like a kubernetes pod!)
The main benefit to me of doing so is they they use a single network namespace, meaning all the containers running in the same pod can reach each other using localhost and you only need to expose the web interface.</description></item><item><title>Nextcloud with podman rootless containers and user systemd services. Part III - NFS gotchas</title><link>https://www.underkube.com/nextcloud-podman-rootless-systemd-part-iii-nfs-gotchas/</link><pubDate>Thu, 28 Jan 2021 08:30:00 +0000</pubDate><guid>https://www.underkube.com/nextcloud-podman-rootless-systemd-part-iii-nfs-gotchas/</guid><description>Nextcloud in container user IDs üîóThe nextcloud process running in the container runs as the www-data user which in fact is the user id 82:
$ podman exec -it nextcloud-app /bin/sh /var/www/html # ps auxww | grep php-fpm 1 root 0:10 php-fpm: master process (/usr/local/etc/php-fpm.conf) 74 www-data 0:16 php-fpm: pool www 75 www-data 0:15 php-fpm: pool www 76 www-data 0:07 php-fpm: pool www 84 root 0:00 grep php-fpm /var/www/html # grep www-data /etc/passwd www-data:x:82:82:Linux User,,,:/home/www-data:/sbin/nologin NFS and user IDs üîóNFS exports can be configured to have a forced uid/gid using the anonuid, anongid and all_squash parameters.</description></item><item><title>Nextcloud with podman rootless containers and user systemd services. Part IV - Exposing Nextcloud externally</title><link>https://www.underkube.com/nextcloud-podman-rootless-systemd-part-iv-exposing/</link><pubDate>Thu, 28 Jan 2021 08:30:00 +0000</pubDate><guid>https://www.underkube.com/nextcloud-podman-rootless-systemd-part-iv-exposing/</guid><description>Introducing bunkerized-nginx üîóI heard about bunkerized-nginx a while ago and I thought it would be nice to use it as a reverse proxy so I can expose my internal services to the internet &amp;lsquo;safely&amp;rsquo;.
A non-exhaustive list of features (copy &amp;amp; paste from the README):
HTTPS support with transparent Let&amp;rsquo;s Encrypt automation State-of-the-art web security : HTTP security headers, prevent leaks, TLS hardening, &amp;hellip; Integrated ModSecurity WAF with the OWASP Core Rule Set Automatic ban of strange behaviors with fail2ban Antibot challenge through cookie, javascript, captcha or recaptcha v3 Block TOR, proxies, bad user-agents, countries, &amp;hellip; Block known bad IP with DNSBL and CrowdSec Prevent bruteforce attacks with rate limiting Detect bad files with ClamAV Easy to configure with environment variables or web UI Automatic configuration with container labels A must have for me was having support for Let&amp;rsquo;s Encrypt and having an easy way to configure it.</description></item><item><title>Nextcloud with podman rootless containers and user systemd services. Part V - Running Nextcloud as a pod with play kube</title><link>https://www.underkube.com/nextcloud-podman-rootless-systemd-part-v-nextcloud-pod/</link><pubDate>Thu, 28 Jan 2021 08:30:00 +0000</pubDate><guid>https://www.underkube.com/nextcloud-podman-rootless-systemd-part-v-nextcloud-pod/</guid><description>podman play kube üîóOne of the cool things about podman is that is not just a docker replacement, it can do so much more!
The feature I&amp;rsquo;m talking about is being able to run Kubernetes YAML pod definitions! How cool is that?
You can read more about this feature in the podman-play-kube man, but essentially, you just need a proper pod yaml definition and podman play kube /path/to/my/pod.yaml will run it for you.</description></item><item><title>Deploy Inspektor Gadget on OpenShift 4.6</title><link>https://www.underkube.com/inspektor-gadget-openshift/</link><pubDate>Thu, 03 Dec 2020 08:30:00 +0000</pubDate><guid>https://www.underkube.com/inspektor-gadget-openshift/</guid><description>Introduction üîóInspektor Gadget is a collection of tools (or gadgets) to debug and inspect Kubernetes applications.
Inspektor Gadget is deployed to each node as a privileged DaemonSet. It uses in-kernel BPF helper programs to monitor events mainly related to syscalls from userspace programs in a pod. The BPF programs are run by the kernel and gather the log data. Inspektor Gadget&amp;rsquo;s userspace utilities fetch the log data from ring buffers and display it.</description></item><item><title>Deploy OpenShift Virtualization 2.5 on OCP 4.6.1 on baremetal IPI</title><link>https://www.underkube.com/openshift-virtualization-on-ocp/</link><pubDate>Thu, 19 Nov 2020 09:30:42 +0200</pubDate><guid>https://www.underkube.com/openshift-virtualization-on-ocp/</guid><description>Preparation üîóEnsure your workers have the virtualization flag enabled:
for node in $(oc get nodes -o name | grep kni1-worker); do oc debug ${node} -- grep -c -E &amp;#39;vmx|svm&amp;#39; /host/proc/cpuinfo done That snippet should return the number of cpu cores with virtualization enabled (it should be all of them).
Subscription üîócat &amp;lt;&amp;lt;EOF | oc apply -f - apiVersion: v1 kind: Namespace metadata: name: openshift-cnv --- apiVersion: operators.coreos.com/v1 kind: OperatorGroup metadata: name: kubevirt-hyperconverged-group namespace: openshift-cnv spec: targetNamespaces: - openshift-cnv --- apiVersion: operators.</description></item><item><title>Deploy OCS 4.5 on OCP 4.6.1 on baremetal IPI</title><link>https://www.underkube.com/ocs-on-ocp/</link><pubDate>Wed, 04 Nov 2020 11:30:42 +0200</pubDate><guid>https://www.underkube.com/ocs-on-ocp/</guid><description>Preparation üîóLabel the nodes you want to use for OCS, in my case:
for node in $(oc get nodes -o name | grep kni1-worker); do oc label ${node} cluster.ocs.openshift.io/openshift-storage=&amp;#39;&amp;#39; done Local storage operator üîóDeploy the local storage operator
cat &amp;lt;&amp;lt;EOF | oc apply -f - apiVersion: v1 kind: Namespace metadata: name: local-storage spec: {} --- apiVersion: operators.coreos.com/v1 kind: OperatorGroup metadata: annotations: olm.providedAPIs: LocalVolume.v1.local.storage.openshift.io name: local-storage namespace: local-storage spec: targetNamespaces: - local-storage --- apiVersion: operators.</description></item><item><title>SCC assignments and permissions in OpenShift</title><link>https://www.underkube.com/custom-scc/</link><pubDate>Thu, 01 Oct 2020 10:18:42 +0200</pubDate><guid>https://www.underkube.com/custom-scc/</guid><description>SCCs üîóThere are tons of information out there about SCCs, but in this post we will be focused on how to create and use a custom SCC only.
See the OpenShift official documentation on Managing Security Context Constraints for more details.
Custom SCC üîóIn the event of requiring a custom SCC, there are a few steps that need to be done to be able to use the SCC properly.
Minimal capabilities üîóThe best way to create a custom SCC would be to build it based on the most restricted one (hint: its name is restricted) and then start adding capabilities and permissions depending on the application requisites.</description></item><item><title>Manage external displays with Gnome and Argos extension</title><link>https://www.underkube.com/gnome-displays-argos/</link><pubDate>Mon, 21 Sep 2020 10:18:42 +0200</pubDate><guid>https://www.underkube.com/gnome-displays-argos/</guid><description>I wanted to easily switch between my regular desktop configuration: All the external displays: To a single external display: Or just the laptop screen: This usually required to open gnome-control-center, then click displays, etc. So I thought it would be nice to look for a extension in the Gnome Extensions site&amp;hellip; but I couldn&amp;rsquo;t find any that worked as I wanted&amp;hellip; so let&amp;rsquo;s try to do our own method! :)</description></item><item><title>Podman rootless containers in RHEL7</title><link>https://www.underkube.com/podman-rootless-rhel7/</link><pubDate>Fri, 24 Jul 2020 12:26:20 +0100</pubDate><guid>https://www.underkube.com/podman-rootless-rhel7/</guid><description>Quick howto to make podman rootless containers work in RHEL7:
sudo yum clean all sudo yum update -y sudo yum install slirp4netns podman -y echo &amp;#34;user.max_user_namespaces=28633&amp;#34; | sudo tee -a /etc/sysctl.d/userns.conf sudo sysctl -p /etc/sysctl.d/userns.conf sudo usermod --add-subuids 200000-300000 --add-subgids 200000-300000 $(whoami) podman system migrate Then, logout and log-in again. Easy peasy!</description></item><item><title>Simulate ONTAP ¬Æ 9.6 on KVM + Trident 20.04 on OCP4</title><link>https://www.underkube.com/trident-ontap-ocp4/</link><pubDate>Mon, 11 May 2020 15:19:14 +0200</pubDate><guid>https://www.underkube.com/trident-ontap-ocp4/</guid><description>Introduction üîóNetApp filers can be used to provide dynamic storage to OCP4/k8s using NetApp&amp;rsquo;s Trident storage orchestrator.
In order to be able to use it, you need to have a real NetApp hardware to play with. It is also true that NetApp offers a simulator to play with.
NOTE: The Simulator is not publicly available and you can only access to it if you are a customer or partner. It is required for you to have a proper NFS license.</description></item><item><title>Xiaomi Mijia Ble Sensor MQTT on containers on Kubernetes</title><link>https://www.underkube.com/xiaomi-mijia-ble-sensor-mqtt-on-containers-on-kubernetes/</link><pubDate>Fri, 08 Nov 2019 13:26:20 +0100</pubDate><guid>https://www.underkube.com/xiaomi-mijia-ble-sensor-mqtt-on-containers-on-kubernetes/</guid><description>Intro üîóAs I mentioned in my previous post, everything was working flawlessly&amp;hellip; except for a bluetooth issue in my raspberry pi 3 that basically renders bluetooth unusuable&amp;hellip; but it is rebooted daily via a cron job, so minor issue :) (I know I know, I&amp;rsquo;m planning to do a better workaround&amp;hellip;)
This was good enough, but a few days ago I decided to give k3sup a chance and install k3s (a lightweight Kubernetes distribution focused on ARM/IoT devices) in a spare pine64 that was gathering dust in a drawer :)</description></item><item><title>Xiaomi Mijia Ble Sensor MQTT on containers</title><link>https://www.underkube.com/xiaomi-mijia-ble-sensor-mqtt-on-containers/</link><pubDate>Fri, 08 Nov 2019 12:35:12 +0100</pubDate><guid>https://www.underkube.com/xiaomi-mijia-ble-sensor-mqtt-on-containers/</guid><description>As a geek, I use Home Assistant to simplify my home automation tasks (running in a container, of course!). Home Assistant is a really nice project and I recommend you to take a look at it if you want to get started in home automation.
One of the things I wanted to have was temperature and humidity sensors spread across the rooms in order to be able to see the current status and historical data&amp;hellip; and it turns out it is supported out of the box using the mitemp_bt module.</description></item><item><title>metallb on OCP4 baremetal</title><link>https://www.underkube.com/metallb-on-ocp4-baremetal/</link><pubDate>Fri, 05 Jul 2019 17:19:14 +0200</pubDate><guid>https://www.underkube.com/metallb-on-ocp4-baremetal/</guid><description>UPDATE: I submitted a PR to the MetalLB docs on how to deploy MetalLB on OpenShift 4 and it has been merged \o/ so hopefully it will be live soon.
ORIGINAL BLOG POST: &amp;ndash;8&amp;lt;&amp;ndash;
This blog post illustrates my steps to deploy metallb on OCP4 running on baremetal.
Environment üîóI have an OCP4 environment running in a Red Hat lab using 3 baremetal hosts as masters + workers deployed using openshift-metal3/dev-scripts</description></item><item><title>Metal3</title><link>https://www.underkube.com/metal3/</link><pubDate>Tue, 25 Jun 2019 17:19:14 +0200</pubDate><guid>https://www.underkube.com/metal3/</guid><description>In this blog post, I&amp;rsquo;m going to try to explain in my own words a high level overview of what Metal3 is, the motivation behind it and some concepts related to a &amp;lsquo;baremetal operator&amp;rsquo;.
Let&amp;rsquo;s have some definitions!
Custom Resource Definition üîóThe k8s API provides some out-of-the-box objects such as pods, services, etc. There are a few methods of extending the k8s API (such as API extensions) but since a few releases back, the k8s API can be extended easily with custom resources definitions (CRDs).</description></item><item><title>OCP4 UPI baremetal pxeless with static ips</title><link>https://www.underkube.com/ocp4_upi_baremetal_pxeless_static_ips/</link><pubDate>Wed, 19 Jun 2019 15:16:45 +0200</pubDate><guid>https://www.underkube.com/ocp4_upi_baremetal_pxeless_static_ips/</guid><description>Do you want to deploy an OCP4 cluster without using PXE and using static IPs?
I&amp;rsquo;ve got you covered. See my unsupported step by step instructions on how to doing it, including:
No PXE (pretty common scenario in big companies) Avoid installing stuff and use containers instead (instead yum/dnf install httpd, haproxy,&amp;hellip; use containers) Use rootless containers if possible Use Fedora29/RHEL8 stuff (nmcli, firewalld, etc.) Enjoy!</description></item><item><title>Lock &amp; unlock GNOME session using CLI</title><link>https://www.underkube.com/lock_unlock_gnome_cli/</link><pubDate>Wed, 19 Jun 2019 10:37:22 +0200</pubDate><guid>https://www.underkube.com/lock_unlock_gnome_cli/</guid><description>I personally use those commands with the gsconnect GNOME extension and KDE Connect on my Android phone:
Lock üîógdbus call --session --dest org.gnome.ScreenSaver --object-path /org/gnome/ScreenSaver --method org.gnome.ScreenSaver.Lock Unlock üîóloginctl unlock-session &amp;amp;&amp;amp; xset dpms force on</description></item><item><title>Bash tips &amp; tricks</title><link>https://www.underkube.com/bash_tips_and_tricks/</link><pubDate>Tue, 18 Jun 2019 17:19:14 +0200</pubDate><guid>https://www.underkube.com/bash_tips_and_tricks/</guid><description>Bash variable with the content of a file üîóNTPFILECONTENT=$(cat /etc/chrony.conf) This will store the &amp;lsquo;\n&amp;rsquo; characters as well.
Display bash variable with the content of a file üîóecho &amp;#34;${NTPFILECONTENT}&amp;#34; Beware the quotes
Append content to a bash variable with a new line üîóNTPFILECONTENT=&amp;#34;${NTPFILECONTENT}&amp;#34;$&amp;#39;\n&amp;#39;&amp;#34;pool ${ntp} iburst&amp;#34; Create files with heredocs üîócat &amp;lt;&amp;lt; EOF &amp;gt; /your/file mycontent even with spaces EOF Some details:
You can use EOF or whatever you want. The EOF needs to be as it is, no whitespace before it.</description></item><item><title>Firewalld tips &amp; tricks</title><link>https://www.underkube.com/firewalld_tips_and_tricks/</link><pubDate>Tue, 18 Jun 2019 17:19:08 +0200</pubDate><guid>https://www.underkube.com/firewalld_tips_and_tricks/</guid><description>Show all rules üîósudo firewall-cmd --list-all Redirect ports üîósudo firewall-cmd --zone=&amp;#34;$(firewall-cmd --get-default-zone)&amp;#34; \ --add-forward-port=port=443:proto=tcp:toport=8443 --permanent sudo firewall-cmd --zone=&amp;#34;$(firewall-cmd --get-default-zone)&amp;#34; \ --add-forward-port=port=80:proto=tcp:toport=8080 --permanent</description></item><item><title>Ignition tips &amp; tricks</title><link>https://www.underkube.com/ignition_tips_and_tricks/</link><pubDate>Tue, 18 Jun 2019 17:18:55 +0200</pubDate><guid>https://www.underkube.com/ignition_tips_and_tricks/</guid><description>Ignition configuration explained üîóhttps://coreos.com/ignition/docs/latest/configuration-v2_2.html
Notes:
file mode is decimal!!! file append = false to overwrite (otherwise it will be appended&amp;hellip;)</description></item><item><title>OCP4 tips &amp; tricks</title><link>https://www.underkube.com/ocp4_tips_and_tricks/</link><pubDate>Tue, 18 Jun 2019 16:42:20 +0200</pubDate><guid>https://www.underkube.com/ocp4_tips_and_tricks/</guid><description>I&amp;rsquo;ve migrated the content of this post to openshift.tips</description></item><item><title>First Post using Hugo and gitlab pages</title><link>https://www.underkube.com/first-post-using-hugo/</link><pubDate>Thu, 03 Jan 2019 00:00:00 +0000</pubDate><guid>https://www.underkube.com/first-post-using-hugo/</guid><description>2019 new year resolutions include to try to keep a blog updated&amp;hellip; so far, I&amp;rsquo;ve:
tweaked the config to use the basics theme imported the old ghost based blog posts using ghostToHugo let&amp;rsquo;s see how it goes :)</description></item><item><title>Using a PS3 wheel in PS4 with Gimx</title><link>https://www.underkube.com/using-a-ps3-wheel-in-ps4-with-gimx/</link><pubDate>Sun, 17 Apr 2016 17:06:02 +0000</pubDate><guid>https://www.underkube.com/using-a-ps3-wheel-in-ps4-with-gimx/</guid><description>I had a Driving Force GT wheel which is not supported and it doesn&amp;rsquo;t work in PS4, so it was basically covering in dust&amp;hellip; but the community is awesome and there exists a project called gimx that enables support for old wheels in new systems like PS4, so I decided to give it a try, and after a few hours understanding what I needed and getting my hands dirty, it is working perfect with the DIY adapter (using a Chinese atmega32u4 + CP2102 converter) and a Raspberry PI 2.</description></item><item><title>Dockerize your tv shows download and streaming to your TV</title><link>https://www.underkube.com/dockerize-your-tv-shows-download-and-streaming/</link><pubDate>Fri, 21 Aug 2015 09:54:23 +0000</pubDate><guid>https://www.underkube.com/dockerize-your-tv-shows-download-and-streaming/</guid><description>I&amp;rsquo;m going to explain my setup of how do I watch my favourites tv shows using containers.
Requisites üîó TV WiFi ChromeCast Plex for Android ShowRSS feed. You need to create an account and setup it with your favourites tv shows, so you&amp;rsquo;ll end up with some rss feed like http://showrss.info/rss.php?user_id=XXXXX&amp;amp;hd=1&amp;amp;proper=1 CentOS 7 (or any distro docker capable) with docker daemon installed and running Non root user to run all the commands (this is a personal preference, feel free to do it with root user if you want&amp;hellip;) Shared folders to store your multimedia, flexget config &amp;amp; plex config.</description></item><item><title>OpenLDAP basic installation for OpenStack</title><link>https://www.underkube.com/openldap-basic-installation-for-openstack/</link><pubDate>Thu, 14 May 2015 10:20:50 +0000</pubDate><guid>https://www.underkube.com/openldap-basic-installation-for-openstack/</guid><description>Install openldap yum install -y openldap-servers openldap-clients Start the service systemctl start slapd Add the cosine and inetorgperson schemas: ldapadd -H ldapi:/// -Y EXTERNAL -f /etc/openldap/schema/cosine.ldif ldapadd -H ldapi:/// -Y EXTERNAL -f /etc/openldap/schema/inetorgperson.ldif Create a temporary config directory where the files will be placed: mkdir -p /root/ldapconf &amp;amp;&amp;amp; cd /root/ldapconf Create the memberof overlay file: cat &amp;gt;./memberof.ldif&amp;lt;&amp;lt;EOF dn: cn={0}module,cn=config objectClass: olcModuleList cn: {0}module olcModulePath: /usr/lib64/openldap olcModuleLoad: {0}memberof.la dn: olcOverlay={0}memberof,olcDatabase={2}hdb,cn=config objectClass: olcConfig objectClass: olcMemberOf objectClass: olcOverlayConfig objectClass: top olcOverlay: {0}memberof EOF Add it: ldapadd -H ldapi:/// -Y EXTERNAL -f .</description></item><item><title>Huawei E303 3G dongle in OpenWRT BarrierBreaker</title><link>https://www.underkube.com/huawei-e303-3g-dongle-in-openwrt-barrierbreaker/</link><pubDate>Sun, 15 Mar 2015 11:54:04 +0000</pubDate><guid>https://www.underkube.com/huawei-e303-3g-dongle-in-openwrt-barrierbreaker/</guid><description>This is a not detailed howto about to make Huawei E303 dongle work with OpenWRT BarrierBreaker. The first step is to follow the official guide to install all the packages needed, etc. Then, create the following files to add support for the 3G dongle:
/etc/config/usb-mode-3g-e303.json { &amp;#34;messages&amp;#34; : [ &amp;#34;55534243000000000000000000000611060000000000000000000000000000&amp;#34;, ], &amp;#34;devices&amp;#34; : { &amp;#34;12d1:14fe&amp;#34;: { &amp;#34;*&amp;#34;: { &amp;#34;t_vendor&amp;#34;: 4817, &amp;#34;t_product&amp;#34;: [ 5374 ], &amp;#34;msg&amp;#34;: [ 0 ] } }, } } /etc/hotplug.</description></item><item><title>Sync rpm &amp; yum databases</title><link>https://www.underkube.com/sync-rpm-yum-databases/</link><pubDate>Tue, 10 Feb 2015 07:34:09 +0000</pubDate><guid>https://www.underkube.com/sync-rpm-yum-databases/</guid><description>If you install some rpm without yum (rpm -Uvh), you should see the following error:
... Transaction Test Succeeded Running Transaction Warning: RPMDB altered outside of yum. Installing : whatever.x86_64 ... This is because the yum database (/var/lib/yum/*) is out of sync with the rpm database (/var/lib/rpm/*), and to fix it you can execute:
yum history new You can also wait to install another package, then yum will resync the databases</description></item><item><title>Install cockpit in CentOS7</title><link>https://www.underkube.com/install-cockpit-in-centos7-2/</link><pubDate>Wed, 04 Feb 2015 11:17:21 +0000</pubDate><guid>https://www.underkube.com/install-cockpit-in-centos7-2/</guid><description>NOTE: Slightly stolen from https://jreypo.wordpress.com/2015/01/09/how-to-install-cockpit-on-centos-7/
Download the virt7-testing repo from the cockpit github wget -O /etc/yum.repos.d/virt7-testing.repo https://github.com/baude/sig-atomic-buildscripts/raw/master/virt7-testing.repo Install cockpit yum install -y cockpit Enable cockpit (notice it&amp;rsquo;s not a service but a socket) systemct enable cockpit.socket Add cockpit service to firewalld allowed services firewall-cmd --permanent --add-service=cockpit Reload the firewall to enable the previous step firewall-cmd reload Create a custom systemd configuration file for cockpit service to workaround this issue cat &amp;gt; /etc/systemd/system/cockpit.</description></item><item><title>Custom tuned profile in RHEL7</title><link>https://www.underkube.com/custom-tuned-profile-in-rhel7/</link><pubDate>Wed, 04 Feb 2015 09:09:15 +0000</pubDate><guid>https://www.underkube.com/custom-tuned-profile-in-rhel7/</guid><description>Tuned has been improved from RHEL6 and the process to create a custom tuned profile has changed. The syntax is now &amp;ldquo;ini&amp;quot;fied and the process to create a custom profile (i.e.- my-virtual-host) is slightly different. In this example, I&amp;rsquo;ll modify the virtual-host profile and add some script to customize it:
Install tuned (if it&amp;rsquo;s not installed yet) yum install -y tuned Create a directory inside /etc/tuned named &amp;ldquo;my-virtual-host&amp;rdquo; mkdir -p /etc/tuned/my-virtual-host/ Create a custom profile and include the virtual-host one: cat &amp;gt; /etc/tuned/my-virtual-host/tuned.</description></item><item><title>En busca del drone perdido:</title><link>https://www.underkube.com/en-busca-del-drone-perdido/</link><pubDate>Sat, 24 Jan 2015 20:28:57 +0000</pubDate><guid>https://www.underkube.com/en-busca-del-drone-perdido/</guid><description>Tras probar el vuelo interior del Hubsan x4 y ver que no ten√≠a muchas protecciones, decidimos salir a probar el drone fuera. El sitio eleg√≠do era la Dehesa de Navalcarb√≥n (Las Rozas), un sitio con muchos √°rboles, pero ten√≠amos localizada una zona donde hab√≠a pocos y no molest√°bamos a nadie. Hac√≠a un poco de viento pero&amp;hellip; bah, venga, por probarlo&amp;hellip; Antes de salir, hice un pedido a banggood de varias bater√≠as extra y un protector del drone para poder volarlo en interiores.</description></item><item><title>spacecmd issues and cache</title><link>https://www.underkube.com/spacecmd-issues-and-cache/</link><pubDate>Wed, 03 Dec 2014 12:13:22 +0000</pubDate><guid>https://www.underkube.com/spacecmd-issues-and-cache/</guid><description>When using spacecmd, it caches stuff like systems and packages. If you are doing operations like register and delete systems, maybe it&amp;rsquo;s useful to delete the cache if there are messages like:
ERROR: redstone.xmlrpc.XmlRpcFault: No such system - sid = 1000010740 To clear cache, use:
spacecmd clear_caches</description></item><item><title>Set file as executable in svn</title><link>https://www.underkube.com/set-file-as-executable-in-svn/</link><pubDate>Tue, 25 Nov 2014 09:52:31 +0000</pubDate><guid>https://www.underkube.com/set-file-as-executable-in-svn/</guid><description>chmod doesn&amp;rsquo;t do the trick, so you need to set the proper flag in svn with:
svn propset svn:executable ON &amp;lt;filename&amp;gt;</description></item><item><title>Package dependency graph of any installed RPM package</title><link>https://www.underkube.com/package-dependency-graph-of-any-installed-rpm-package/</link><pubDate>Wed, 19 Nov 2014 14:42:01 +0000</pubDate><guid>https://www.underkube.com/package-dependency-graph-of-any-installed-rpm-package/</guid><description>V√≠a http://xmodulo.com/check-rpm-package-dependencies-fedora-centos-rhel.html:
Just install rpmorphan and graphviz: yum install -y rpmorphan graphviz For example, for gzip package:
rpmdep.pl -dot gzip.dot gzip dot -Tpng -o output.png gzip.dot Browse the output.png file and it should looks like:</description></item><item><title>RPM Architecture-specific Dependencies</title><link>https://www.underkube.com/rpm-architecture-specific-dependencies/</link><pubDate>Tue, 18 Nov 2014 09:41:56 +0000</pubDate><guid>https://www.underkube.com/rpm-architecture-specific-dependencies/</guid><description>If you need to specify some packages in the &amp;ldquo;Require&amp;rdquo; section of a SPEC file, you should use the ISA (Instruction Set Architecture) dependencies
The following is not longer valid:
Requires: gtk.i686 This is valid:
Requires: gtk(x86-32)</description></item><item><title>Simple command to create a timelapse from a few images</title><link>https://www.underkube.com/simple-command-to-create-a-timelapse-from-a-few-images/</link><pubDate>Tue, 16 Sep 2014 18:23:46 +0000</pubDate><guid>https://www.underkube.com/simple-command-to-create-a-timelapse-from-a-few-images/</guid><description>cat *jpg* | ffmpeg -f image2pipe -r 30 -vcodec mjpeg -i - -vcodec libx264 out.mp4</description></item><item><title>Raspistill + convert + sshfs</title><link>https://www.underkube.com/raspistill-convert-sshfs/</link><pubDate>Sun, 14 Sep 2014 09:37:09 +0000</pubDate><guid>https://www.underkube.com/raspistill-convert-sshfs/</guid><description>If you have a raspberry with a camera module, you can use them as a webcam. The simpliest idea is to capture a picture every x seconds and serve it with a simple web server. But if you don&amp;rsquo;t want to use the raspberry as a web server (low bandwitdh, other tasks, privacy,&amp;hellip;), you can use sshfs to copy the image to a remote filesystem and serve it from there. The main idea:</description></item><item><title>Run a process in background, nohupped and without nohup.out</title><link>https://www.underkube.com/run-a-process-in-background-nohupped-and-without-nohup-out/</link><pubDate>Thu, 11 Sep 2014 14:12:06 +0000</pubDate><guid>https://www.underkube.com/run-a-process-in-background-nohupped-and-without-nohup-out/</guid><description>nohup yourprocess &amp;gt;/dev/null 2&amp;gt;&amp;amp;1&amp;amp;</description></item><item><title>Define a new service in firewalld</title><link>https://www.underkube.com/define-a-new-service-in-firewalld/</link><pubDate>Thu, 11 Sep 2014 12:55:05 +0000</pubDate><guid>https://www.underkube.com/define-a-new-service-in-firewalld/</guid><description>If you want to create a new service definition (i.e. to group a few ports in the same service), the procedure will be:
Create a file called &amp;ldquo;myservice.xml&amp;rdquo; in /etc/firewalld/services/ folder with the following content: &amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;utf-8&amp;#34;?&amp;gt; &amp;lt;service&amp;gt; &amp;lt;short&amp;gt;myservice&amp;lt;/short&amp;gt; &amp;lt;description&amp;gt;Group httpd ports&amp;lt;/description&amp;gt; &amp;lt;port protocol=&amp;#34;tcp&amp;#34; port=&amp;#34;80&amp;#34;/&amp;gt; &amp;lt;port protocol=&amp;#34;tcp&amp;#34; port=&amp;#34;443&amp;#34;/&amp;gt; &amp;lt;port protocol=&amp;#34;tcp&amp;#34; port=&amp;#34;8080&amp;#34;/&amp;gt; &amp;lt;port protocol=&amp;#34;tcp&amp;#34; port=&amp;#34;8000&amp;#34;/&amp;gt; &amp;lt;/service&amp;gt; Set permissions restorecon /etc/firewalld/services/myservice.xml chmod 640 /etc/firewalld/services/myservice.xml Reload firewalld to force it to read the XML firewall-cmd --reload Add the RH-Satellite-6 service to the default zone firewall-cmd --permanent --add-service=myservice Reload firewalld just in case firewall-cmd --reload</description></item><item><title>My first upstream contribution</title><link>https://www.underkube.com/my-first-upstream-contribution/</link><pubDate>Tue, 02 Sep 2014 14:35:02 +0000</pubDate><guid>https://www.underkube.com/my-first-upstream-contribution/</guid><description>A very simple contribution to RHEL initscripts, but it makes me proud :)
ifup-wireless: add support for wowlan ifup-wireless: add support for wowlan (second part) From this bugzilla.</description></item><item><title>Using docker to read saXX files from other system</title><link>https://www.underkube.com/using-docker-to-read-saxx-files-from-other-system/</link><pubDate>Thu, 28 Aug 2014 10:08:11 +0000</pubDate><guid>https://www.underkube.com/using-docker-to-read-saxx-files-from-other-system/</guid><description>From my F20 laptop, I&amp;rsquo;m not able to read RHEL6 sar data. Attempting to doing result in the following error:
File created by sar/sadc from sysstat version 9.0.4 Current sysstat version can no longer read the format of this file (0x1170) According to this KCS you should be able to read older files using the &amp;ndash;legacy option.
But it doesn&amp;rsquo;t work for me either:
Usage: sar [ options ] [ &amp;lt;interval&amp;gt; [ &amp;lt;count&amp;gt; ] ] Options are: .</description></item><item><title>Docker &amp; proxy</title><link>https://www.underkube.com/docker-proxy/</link><pubDate>Thu, 28 Aug 2014 08:23:13 +0000</pubDate><guid>https://www.underkube.com/docker-proxy/</guid><description>To configure docker (in RHEL) to get images through proxy, edit /etc/sysconfig/docker and add the following parameters according to your environment:
HTTP_PROXY=&amp;#34;http://&amp;lt;proxy_host&amp;gt;:&amp;lt;proxy_port&amp;gt;&amp;#34; HTTPS_PROXY=&amp;#34;https://&amp;lt;proxy_host&amp;gt;:&amp;lt;proxy_port&amp;gt;&amp;#34; http_proxy=&amp;#34;${HTTP_PROXY}&amp;#34; https_proxy=&amp;#34;${HTTPS_PROXY}&amp;#34; And restart docker service:
systemctl restart docker</description></item><item><title>Using systemd as cron replacement</title><link>https://www.underkube.com/using-systemd-as-cron-replacement/</link><pubDate>Mon, 18 Aug 2014 14:37:35 +0000</pubDate><guid>https://www.underkube.com/using-systemd-as-cron-replacement/</guid><description>One of the features of systemd are timers. This recipie shows how to run two tasks (first and second) every minute with dependencies between both.
Create a /etc/systemd/system/mytimer.timer file with the following content [Unit] Description=run my timer tasks every minute and after reboot [Timer] OnBootSec=5min OnCalendar=*:0/1 Unit=mytimer.target [Install] WantedBy=basic.target Create a /etc/systemd/system/mytimer.target file with the following content: [Unit] Description=Mytimer StopWhenUnneeded=yes Create a first.service (it will be called before second.service) in /etc/systemd/system/first.</description></item><item><title>Run your own Ghost blog on OpenShift</title><link>https://www.underkube.com/run-your-own-ghost-blog-on-openshift/</link><pubDate>Tue, 22 Jul 2014 20:32:25 +0000</pubDate><guid>https://www.underkube.com/run-your-own-ghost-blog-on-openshift/</guid><description>Easy peasy:
Create a free OpenShift account Setup your environment Run the following command: rhc app create ghost nodejs-0.10 --env NODE_ENV=production --from-code https://github.com/openshift-quickstart/openshift-ghost-quickstart.git Profit Check this quickstart for more information, and the awesome OpenShift documentation</description></item><item><title>First post using Ghost</title><link>https://www.underkube.com/first-post-using-ghost/</link><pubDate>Tue, 22 Jul 2014 19:39:06 +0000</pubDate><guid>https://www.underkube.com/first-post-using-ghost/</guid><description>Testing ghost platform trying to have a nice platform to force myself to write some blog post often :)</description></item><item><title>Purgar los paquetes desinstalados en Debian</title><link>https://www.underkube.com/purgar-los-paquetes-desinstalados-en-debian/</link><pubDate>Wed, 28 Nov 2007 10:39:01 +0000</pubDate><guid>https://www.underkube.com/purgar-los-paquetes-desinstalados-en-debian/</guid><description>dpkg &amp;ndash;purge $(dpkg &amp;ndash;get-selections | grep deinstall|cut -d&amp;quot; &amp;quot; -f1)
Easy! :D</description></item><item><title>Puppet</title><link>https://www.underkube.com/puppet/</link><pubDate>Thu, 25 Oct 2007 09:22:50 +0000</pubDate><guid>https://www.underkube.com/puppet/</guid><description>En el mundillo de los &amp;ldquo;sysadmin&amp;rdquo;, se lleva mucho el scripteo para automatizar tareas. Sin embargo, puede ser un autentico co√±azo hacer scripts desde 0 para todo. Ahi es donde entra puppet, que segun sus creadores (reductivelabs), es: A system administrative engine for your whole network. Puppet lets you perform normal administrative tasks (such as adding users, installing packages, and updating server configurations) on any number of systems, even if those systems are running completely different operating systems.</description></item><item><title>OpenVPN en OS X = Tunnelblick</title><link>https://www.underkube.com/openvpn-en-os-x-tunnelblick/</link><pubDate>Sat, 23 Jun 2007 09:22:11 +0000</pubDate><guid>https://www.underkube.com/openvpn-en-os-x-tunnelblick/</guid><description>F√°cil y simple (ala macos style). 1.- Te descargas el software de la web oficial 2.- Lo configuras adecuadamente 3.- Cuando quieras conectar, pinchas en el icono de la barra superior, conectar, e voil√† :) Ni compilar el openvpn oficial, ni historias.</description></item><item><title>Dummy files</title><link>https://www.underkube.com/dummy-files/</link><pubDate>Wed, 06 Jun 2007 13:51:06 +0000</pubDate><guid>https://www.underkube.com/dummy-files/</guid><description>Un peque√±o tip: Si te hace falta crear un fichero de X tama√±o en linux, tan facil como: dd if=/dev/zero of=fichero bs=tama√±oenbytes count=1 P.ej: dd if=/dev/zero of=dummyfile bs=1000000000 count=1 dummyfile de 1 Giga :)</description></item><item><title>beryl, fedora y ppc</title><link>https://www.underkube.com/beryl-fedora-y-ppc/</link><pubDate>Tue, 22 May 2007 16:43:02 +0000</pubDate><guid>https://www.underkube.com/beryl-fedora-y-ppc/</guid><description>Para los que se frustren al ver que al activar beryl (o compiz) en Fedora con un ppc, ahi va un minihowto: Descargar http://wilsonet.com/packages/xorg-ppc-compiz-fix/xorg-x11-server-Xorg-1.1.1-47.1.ppc.rpm, e instalarlo via rpm (rpm -i &amp;hellip;). Ya est√° :) Explicaci√≥n: Los micros ppc (powerpc), utilizados por los macs (y algunos m√°s), organizan de manera distinta los bits&amp;hellip; si sabes de programaci√≥n te sonar√° bigendian y littleendian, y si no, busca en google :D, y el paquete de ppc de xorg, estaba compilado sin tenerlo en cuenta, asique hacia cosas raras con los colores&amp;hellip; El paquete antes descargado e instalado, ya no tiene ese bug, aunque claro,&amp;hellip; no es un paquete &amp;ldquo;oficial&amp;rdquo; de Fedora, y a saber que lleva :S De todas maneras, sigue habiendo un bug, cuando suspendes el equipo y lo despiertas, los efectos se ven mal, pero se soluciona recargando beryl.</description></item><item><title>Howtoforge</title><link>https://www.underkube.com/howtoforge/</link><pubDate>Wed, 02 May 2007 23:37:22 +0000</pubDate><guid>https://www.underkube.com/howtoforge/</guid><description>Una de las cosas que voy a poner a menudo en este blog, son peque√±os &amp;ldquo;tips &amp;amp; tricks&amp;rdquo; (si, seguro que existe su equivalente en castellano, pero as√≠ es mas c00l), o links a paginas &amp;ldquo;√∫tiles&amp;rdquo; (al menos para m√≠). Para empezar la categor√≠a de links, Howtoforge. Es una web que redacta y recopila howtos paso a paso para convertir una distribuci√≥n linux, en un perfecto servidor o un perfecto sistema de escritorio.</description></item></channel></rss>